<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Teleworks ScreenPop</title>
    <meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
    <style>
        body {
            background-color: linen;
        }
        
        h1 {
            font-size: medium;
            font-weight: bold;
        }

        span {
            font-size: medium;
            font-weight: normal;
        }
    </style>
</head>
<body>
    <script>
        document.querySelector("title").innerHTML ="";
        let authData = {}
        window.electron.receive('auth-data', (data) => {
            authData = data
            document.getElementById('message').innerHTML = authData?.message || 'Enter Redtail Account Credentials.';
        });
        function sendForm(event) {
            event.preventDefault() // stop the form from submitting
            let redtailAuthInput = {
                crm: authData?.crm,
                cliNumber: authData?.cliNumber,
                username: document.getElementById("username").value,
                password: document.getElementById("password").value,
                apiKey: document.getElementById("apiKey").value
            }
            window.electron.send('redtail-auth-submission', redtailAuthInput);
        }
    </script>

    <h1 id='message'></h1>
    <form name="redtailAuthForm" onSubmit="JavaScript:sendForm(event)">
        Redtail Username:
        <br>
        <input id="username" name="username" type="text">
        <br>
        Redtail Password:
        <br>
        <input id="password" name="password" type="password">
        <br>
        Redtail API Key:
        <br>
        <input id="apiKey" name="apiKey" type="text">
        <br>
        <br>
        <input type="submit" value="Submit">
    </form>
</body>
</html>